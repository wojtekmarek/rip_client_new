{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\piotr\\\\Desktop\\\\studia\\\\szkielety\\\\client\\\\clientrip\\\\src\\\\components\\\\Payment\\\\Payment.js\";\nimport React, { Component } from \"react\";\nimport \"./Payment.css\";\nimport TopMenu from \"../TopMenu/TopMenu\";\nimport Loaderspiner from \"../Loaderspiner/Loaderspiner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Payment extends Component {\n  constructor(props) {\n    super(props);\n    this.componentDidMount = async () => {\n      //console.log(this.props.store.backendadress);\n      // console.log(window.location.search.split(\"=\")[1]);\n      var tid = window.location.search.split(\"=\")[1];\n      if (tid === undefined) {\n        this.setState({\n          wronglink: true,\n          isprocecing: true\n        });\n      } else {\n        await fetch(this.props.store.backendadress + '/payment/checkpaymenbytid?' + new URLSearchParams({\n          tid: tid\n        })).then(res => res.json()).then(json => {\n          console.log(json.Status);\n          if (json.Status === \"Opłacona\") {\n            this.setState({\n              payfor: json.Title\n            });\n            this.setoverpay();\n          } else if (json.Status === \"Oczekująca na płatność\") {\n            this.state({\n              checknumer: 0\n            });\n            this.checkstatuspayment(json._id);\n          } else {}\n        }).catch(function () {\n          //this.seterror();\n        });\n      }\n    };\n    this.seterror = () => {\n      this.setState({\n        wronglink: true,\n        isprocecing: true\n      });\n    };\n    this.setoverpay = () => {\n      this.setState({\n        isprocecing: true,\n        statuspayment: true,\n        statuspaymentdiv: \"Posiada status oplacona\"\n      });\n    };\n    this.checkstatuspayment = id => {\n      const {\n        checknumer\n      } = this.state;\n      if (checknumer < 10) {\n        this.setState({\n          checknumer: checknumer + 1\n        });\n        setTimeout(async () => {\n          await fetch(this.props.store.backendadress + '/payment/checkstatuspaymenbytid?' + new URLSearchParams({\n            id: id\n          })).then(res => {\n            if (res.status === 201) {\n              this.checkstatuspayment(id);\n            } else if (res.status === 200) {\n              this.setoverpay();\n            } else {\n              this.seterror();\n            }\n          });\n        }, 2000);\n      } else {\n        this.seterror();\n      }\n    };\n    this.state = {\n      isprocecing: false,\n      wronglink: false,\n      statuspayment: false,\n      payfor: \"\",\n      checknumer: 0\n    };\n    this.checkstatuspayment = this.checkstatuspayment.bind(this);\n    this.setoverpay = this.setoverpay.bind(this);\n    this.seterror = this.seterror.bind(this);\n  }\n  render() {\n    const {\n      isprocecing,\n      statuspayment,\n      statuspaymentdiv,\n      wronglink,\n      payfor\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(TopMenu, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kontentpayment\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"kontentpaymenttitle\",\n          children: \"Status twojej p\\u0142atno\\u015Bci\"\n        }, \"kontentpaymenttitle\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), !isprocecing ? [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"paymentprocesing\",\n          children: [/*#__PURE__*/_jsxDEV(Loaderspiner, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this), \"Oczekujemy na potwierdzenie p\\u0142atno\\u015Bci od dostawcy p\\u0142atno\\u015Bci\"]\n        }, \"paymentprocesing\", true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)] : [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Twoja \", payfor, \":\"]\n        }, \"paymentprocesingno\", true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)], wronglink ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"paymentwronglink\",\n          children: \"Niestety adres przekierowania jest b\\u0142edny sprawdz status swojej p\\u0142atno\\u015Bci w zak\\u0142adce moje konto\"\n        }, \"paymentwronglink\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 24\n        }, this) : \"\", statuspayment ? statuspaymentdiv : \"\"]\n      }, \"kontentpayment\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, \"paymentdiv\", true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Payment;","map":{"version":3,"names":["React","Component","TopMenu","Loaderspiner","Payment","constructor","props","componentDidMount","tid","window","location","search","split","undefined","setState","wronglink","isprocecing","fetch","store","backendadress","URLSearchParams","then","res","json","console","log","Status","payfor","Title","setoverpay","state","checknumer","checkstatuspayment","_id","catch","seterror","statuspayment","statuspaymentdiv","id","setTimeout","status","bind","render"],"sources":["C:/Users/piotr/Desktop/studia/szkielety/client/clientrip/src/components/Payment/Payment.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./Payment.css\";\r\nimport TopMenu from \"../TopMenu/TopMenu\";\r\nimport Loaderspiner from \"../Loaderspiner/Loaderspiner\";\r\n\r\nclass Payment extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isprocecing: false,\r\n      wronglink: false,\r\n      statuspayment: false,\r\n      payfor: \"\",\r\n      checknumer:0\r\n\r\n\r\n    };\r\n\r\n    this.checkstatuspayment = this.checkstatuspayment.bind(this);\r\n    this.setoverpay = this.setoverpay.bind(this);\r\n    this.seterror=this.seterror.bind(this);\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    //console.log(this.props.store.backendadress);\r\n    // console.log(window.location.search.split(\"=\")[1]);\r\n    var tid = window.location.search.split(\"=\")[1];\r\n    if (tid === undefined) {\r\n      this.setState({\r\n        wronglink: true,\r\n        isprocecing: true\r\n      });\r\n    } else {\r\n      await fetch(this.props.store.backendadress + '/payment/checkpaymenbytid?' + new URLSearchParams({\r\n        tid: tid\r\n      })).then(res => res.json())\r\n        .then(json => {\r\n          console.log(json.Status);\r\n          if (json.Status === \"Opłacona\") {\r\n            this.setState({\r\n              payfor: json.Title,\r\n            });\r\n           \r\n            this.setoverpay();\r\n\r\n          } else if (json.Status === \"Oczekująca na płatność\") {\r\n            this.state({checknumer:0})\r\n            this.checkstatuspayment(json._id);\r\n\r\n          } else { }\r\n\r\n\r\n        }).catch(function () {\r\n          //this.seterror();\r\n        })\r\n    }\r\n\r\n  }\r\n  seterror=()=>{\r\n    this.setState({\r\n      wronglink: true,\r\n      isprocecing: true\r\n    });\r\n  }\r\n  setoverpay = () => {\r\n    this.setState({\r\n\r\n      isprocecing: true,\r\n      statuspayment: true,\r\n      statuspaymentdiv: \"Posiada status oplacona\"\r\n\r\n    })\r\n  }\r\n\r\n  checkstatuspayment = (id) => {\r\n    const{checknumer}=this.state;\r\n    if(checknumer<10){\r\n      this.setState({checknumer:(checknumer+1)})\r\n      setTimeout(async () => {\r\n       \r\n     \r\n        await fetch(this.props.store.backendadress + '/payment/checkstatuspaymenbytid?' + new URLSearchParams({\r\n          id: id\r\n        }))\r\n          .then(res => {\r\n             if(res.status===201){\r\n              this.checkstatuspayment(id);\r\n             }else if(res.status===200){\r\n              this.setoverpay();\r\n             }else{\r\n              this.seterror();\r\n             }\r\n            })\r\n    }, 2000)\r\n    }else{\r\n      this.seterror();\r\n    }\r\n    \r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  render() {\r\n    const { isprocecing, statuspayment, statuspaymentdiv, wronglink, payfor } = this.state;\r\n    return (\r\n      <div key={\"paymentdiv\"}>\r\n        <TopMenu></TopMenu>\r\n        <div className=\"kontentpayment\" key=\"kontentpayment\">\r\n          <div className=\"kontentpaymenttitle\" key=\"kontentpaymenttitle\">Status twojej płatności</div>\r\n          {!isprocecing ? [\r\n\r\n            <div className=\"paymentprocesing\" key=\"paymentprocesing\">\r\n              <Loaderspiner />\r\n              Oczekujemy na potwierdzenie płatności od dostawcy płatności\r\n\r\n            </div>\r\n\r\n          ] : [\r\n            <div key=\"paymentprocesingno\" >Twoja {payfor}:\r\n            </div>\r\n\r\n          ]}\r\n          {wronglink ? <div className=\"paymentwronglink\" key=\"paymentwronglink\">Niestety adres przekierowania jest błedny sprawdz status swojej płatności w zakładce moje konto</div> : \"\"}\r\n          {statuspayment ? statuspaymentdiv : \"\"}\r\n\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n\r\n    )\r\n  }\r\n}\r\nexport default Payment"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}